<div class="modal-header">
    <h3 class="modal-title">Ajouter une tâche programmée</h3>
</div>
<div class="modal-body">
    <form novalidate name="form" >

        {{form.$valid}}
        {{task}}
        <div class="form-group" ng-repeat="option in module.options">
            <label for="{{option.name}}">{{option.label}}</label>
            <div ng-switch="option.type">

                <div ng-switch-when="select">
                    <select id="{{option.name}}" class="form-control" ng-model="task.task.options[option.name]" ng-required="{{option.required}}" >
                        <option value="{{value.value}}" ng-repeat="value in option.values">{{value.label}}</option>
                    </select>
                </div>

                <div ng-switch-when="text">
                    <input id="{{option.name}}" type="text" class="form-control" ng-required="{{option.required}}" ng-model="task.task.options[option.name]" />
                </div>

            </div>
        </div>

        <div class="form-group">
            <div class="btn-group">
                <label class="btn btn-default" ng-model="task.schedule.method" uib-btn-radio="'interval'" uncheckable>Intervalle</label>
                <label class="btn btn-default" ng-model="task.schedule.method" uib-btn-radio="'moment'" uncheckable>Moment</label>
                <label class="btn btn-default" ng-model="task.schedule.method" uib-btn-radio="'range'" uncheckable>Intervalle de date</label>
            </div>
        </div>

        <div class="form-group" ng-show="task.schedule.method === 'interval'">
            <label for="interval">Intervalle (en secondes)</label>
            <input id="interval" type="text" class="form-control" ng-required="task.schedule.method === 'interval'" ng-model="task.schedule.interval" />
        </div>

        <div ng-show="task.schedule.method === 'moment'">

            <h4>Type de moment</h4>

            <div class="form-group" >
                <div class="btn-group">
                    <label class="btn btn-default" ng-model="task.schedule.subMoment" uib-btn-radio="'date'" uncheckable>Date</label>
                    <label class="btn btn-default" ng-model="task.schedule.subMoment" uib-btn-radio="'hours'" uncheckable>Heure</label>
                </div>
            </div>

            <div class="form-group" ng-show="task.schedule.subMoment === 'date'">
                <label >Intervalle</label>
                <input type="text" class="form-control" date-range-picker ng-model="task.schedule.date" options="dateRangePickerOptions" />
            </div>

            <div ng-show="task.schedule.subMoment === 'hours'">
                <div class="form-group" >
                    <label >Jours</label>
                    <select size="7" class="form-control" ng-required="task.schedule.method === 'hours'" multiple ng-multiple="true" ng-model="task.schedule.selectedDays" ng-options="day.name for day in task.schedule.days"></select>
                </div>
                <div class="form-group" ng-show="task.schedule.subMoment === 'hours'">
                    <label >Heure</label>
                    <input type="time" min="00:00" ng-model="task.schedule.hours" class="form-control" ng-required="task.schedule.method === 'hours'"/>
                </div>
            </div>

        </div>

        <div class="form-group">
            <label>Actions</label>
            <div>
                <label class="checkbox-inline" ng-repeat="action in task.task.actions">
                    <input type="checkbox" ng-model="action.value" ng-required="actionCheckBox" ng-change="actionCheckboxChange()"> {{action.text}}
                </label>
            </div>
        </div>

    </form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" type="button" ng-click="submitForm(form)">Enregistrer</button>
    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
</div>